---
import { type CollectionEntry, getCollection } from 'astro:content';
import SidebarLayout from '../../layouts/SidebarLayout.astro';
import { render } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: post,
	}));
}
type Props = CollectionEntry<'blog'>;

const post = Astro.props;
const { title, description, date } = post.data;
const { Content } = await render(post);
---

<SidebarLayout>
	<article>
		<div class="prose max-w-none">
			<div class="title">
				<div class="date">
					<FormattedDate date={date} />
				</div>
				<h1>{title}</h1>
				<hr />
			</div>
			<Content />
		</div>
	</article>
</SidebarLayout>
